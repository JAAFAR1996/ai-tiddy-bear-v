# ðŸ§¸ AI TEDDY BEAR V5 - ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================================
# Instructions:
# 1. Copy this file to .env
# 2. Replace all placeholder values with actual values
# 3. NEVER commit .env to version control
# 4. Generate secrets using: python -c "import secrets; print(secrets.token_urlsafe(32))"
# ============================================================================

# ============================================================================
# ENVIRONMENT & DEPLOYMENT
# ============================================================================
# Options: production, staging, development, test
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# SECURITY KEYS - REQUIRED (NO DEFAULTS IN PRODUCTION)
# ============================================================================
# CRITICAL: Each key must be unique, 32+ characters, cryptographically secure
SECRET_KEY=your-secret-key-at-least-32-chars-CHANGE-THIS
JWT_SECRET_KEY=your-jwt-secret-key-at-least-32-chars-CHANGE-THIS
COPPA_ENCRYPTION_KEY=your-coppa-encryption-key-at-least-32-chars-CHANGE-THIS

# ============================================================================
# DATABASE - POSTGRESQL REQUIRED
# ============================================================================
# Production format: postgresql://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://ai_teddy_user:password@localhost:5432/ai_teddy_bear
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# Alternative DB configuration (for Docker/K8s)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ai_teddy_bear
DB_USER=ai_teddy_user
DB_PASSWORD=password

# ============================================================================
# REDIS - REQUIRED FOR CACHING & SESSIONS
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5

# Alternative Redis configuration
REDIS_HOST=localhost

# ============================================================================
# PRODUCTION TTS CACHE - REDIS BASED
# ============================================================================
# Enable Redis-based TTS caching for production performance
TTS_CACHE_ENABLED=true
# Redis URL specifically for TTS cache (can be separate Redis instance)
REDIS_TTS_CACHE_URL=redis://localhost:6379/2
# Cache TTL in seconds (1 hour default)
TTS_CACHE_TTL=3600
# Maximum cache size in MB
TTS_CACHE_MAX_SIZE_MB=1024
# Compression level: 0=none, 1=light, 2=medium, 3=aggressive
TTS_CACHE_COMPRESSION=2
# Cache strategy: lru, lfu, ttl_based, cost_aware
TTS_CACHE_STRATEGY=cost_aware
# Circuit breaker settings
TTS_CACHE_CIRCUIT_BREAKER_THRESHOLD=5
TTS_CACHE_CIRCUIT_BREAKER_TIMEOUT=60
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================================================
# AI SERVICES - OPENAI REQUIRED
# ============================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# Optional AI Services
ELEVENLABS_API_KEY=
WHISPER_MODEL=medium

# ============================================================================
# CORS & SECURITY - NO WILDCARDS ALLOWED
# ============================================================================
# Production: Use exact domains only
CORS_ALLOWED_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000","http://localhost:8000"]
# Production example: ["https://app.aiteddybear.com","https://api.aiteddybear.com"]

ALLOWED_HOSTS=["localhost","127.0.0.1"]
# Production example: ["app.aiteddybear.com","api.aiteddybear.com"]

# ============================================================================
# CHILD SAFETY & COPPA COMPLIANCE
# ============================================================================
COPPA_COMPLIANCE_MODE=true
CONTENT_FILTER_STRICT=true
PARENT_NOTIFICATION_EMAIL=parent@example.com

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# SECURITY THRESHOLDS - CONFIGURABLE
# ============================================================================
SECURITY_BRUTE_FORCE_ATTEMPTS=10
SECURITY_BRUTE_FORCE_WINDOW=3600
SECURITY_ACCESS_MAX_PER_HOUR=30
SECURITY_ACCESS_MAX_PER_DAY=200
SECURITY_ACCESS_MAX_PER_MINUTE=10
SECURITY_UNUSUAL_HOURS_START=0
SECURITY_UNUSUAL_HOURS_END=6
SECURITY_CHILD_ACCESS_EXCESSIVE_COUNT=50
SECURITY_CHILD_ACCESS_HIGH_FREQUENCY=10
SECURITY_IP_BLOCK_DURATION=3600

# ============================================================================
# CONTENT & SAFETY THRESHOLDS
# ============================================================================
SAFETY_SCORE_THRESHOLD=0.8
CONTENT_COMPLEXITY_AGE_THRESHOLD_SIMPLE=5
CONTENT_COMPLEXITY_AGE_THRESHOLD_COMPLEX=8
VOICE_SPEED_MIN=0.5
VOICE_SPEED_MAX=2.0
VOLUME_LEVEL_MIN=0.1
VOLUME_LEVEL_MAX=1.0

# ============================================================================
# JWT CONFIGURATION
# ============================================================================
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_BASE_URL=https://api.aiteddybear.com
API_TITLE=AI Teddy Bear API
API_VERSION=1.0.0
STAGING_URL=https://staging-api.aiteddybear.com
SUPPORT_EMAIL=support@aiteddybear.com

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
SESSION_SECRET=your-session-secret-key-CHANGE-THIS
SESSION_EXPIRE_HOURS=24
SESSION_SECURE=true
SESSION_HTTPONLY=true
SESSION_SAMESITE=strict

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
SENTRY_DSN=

# ============================================================================
# OPTIONAL SERVICES
# ============================================================================
# Kafka Configuration
KAFKA_ENABLED=false
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
SCHEMA_REGISTRY_URL=http://schema-registry:8081

# Vault Configuration
VAULT_ENABLED=false
VAULT_URL=http://vault:8200
VAULT_TOKEN=

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_DATABASE=true
ENABLE_REDIS=true
ENABLE_AI_SERVICES=true
USE_MOCK_SERVICES=false

# ============================================================================
# DATA RETENTION & PRIVACY
# ============================================================================
DATA_RETENTION_DAYS=90
AUTO_DELETE_ENABLED=true
DATA_EXPORT_ENABLED=true

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================
# Documentation URLs (disable in production)
DOCS_URL=/docs
REDOC_URL=/redoc

# ============================================================================
# FALLBACK & RESILIENCE CONFIGURATION
# ============================================================================
# Enable/disable fallback system
FALLBACK_SYSTEM_ENABLED=true

# Circuit breaker settings (per environment)
FALLBACK_CIRCUIT_BREAKER_THRESHOLD=5
FALLBACK_CIRCUIT_BREAKER_TIMEOUT=60

# Health check intervals (seconds)
FALLBACK_HEALTH_CHECK_INTERVAL=30
FALLBACK_HEALTH_CHECK_TIMEOUT=10

# Logging configuration for fallback system
FALLBACK_LOG_ALL_FAILURES=true
FALLBACK_LOG_DECISIONS=true
FALLBACK_TRACK_PERFORMANCE=true

# Cost monitoring thresholds
FALLBACK_DAILY_COST_THRESHOLD_USD=100.0
FALLBACK_HOURLY_COST_THRESHOLD_USD=10.0

# Performance monitoring thresholds (milliseconds)
FALLBACK_RESPONSE_TIME_WARNING_MS=5000
FALLBACK_RESPONSE_TIME_ERROR_MS=10000

# Provider-specific settings
# AI Service providers
AI_PRIMARY_PROVIDER=openai_gpt4
AI_SECONDARY_PROVIDERS=anthropic_claude,openai_gpt35
AI_TERTIARY_PROVIDERS=google_gemini,cohere

# TTS Service providers  
TTS_PRIMARY_PROVIDER=elevenlabs_premium
TTS_SECONDARY_PROVIDERS=openai_tts,azure_tts
TTS_TERTIARY_PROVIDERS=google_tts,aws_polly

# STT Service providers
STT_PRIMARY_PROVIDER=openai_whisper
STT_SECONDARY_PROVIDERS=azure_stt,google_stt
STT_TERTIARY_PROVIDERS=aws_transcribe,ibm_watson

# Safety Service providers (CRITICAL - multiple layers)
SAFETY_PRIMARY_PROVIDERS=openai_moderation,perspective_api
SAFETY_SECONDARY_PROVIDERS=azure_content_moderator,aws_comprehend
SAFETY_EMERGENCY_PROVIDERS=strict_allowlist_only

# File Storage providers
STORAGE_PRIMARY_PROVIDER=aws_s3_primary
STORAGE_SECONDARY_PROVIDERS=azure_blob,aws_s3_secondary
STORAGE_TERTIARY_PROVIDERS=gcp_storage,minio_cluster

# Database fallback configuration
DB_PRIMARY_HOST=postgres-primary.local
DB_REPLICA_HOSTS=postgres-replica-1.local,postgres-replica-2.local
DB_BACKUP_HOSTS=postgres-backup.local

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
# Before deploying to production, ensure:
# âœ… ENVIRONMENT=production
# âœ… DEBUG=false  
# âœ… All keys (SECRET_KEY, JWT_SECRET_KEY, COPPA_ENCRYPTION_KEY) are unique
# âœ… DATABASE_URL points to PostgreSQL with SSL
# âœ… REDIS_URL is configured (no mocks)
# âœ… OPENAI_API_KEY is set
# âœ… CORS_ALLOWED_ORIGINS has specific domains (no wildcards)
# âœ… PARENT_NOTIFICATION_EMAIL is a valid monitored email
# âœ… SSL certificates are configured
# âœ… Documentation URLs are disabled (empty DOCS_URL, REDOC_URL)
# âœ… FALLBACK_SYSTEM_ENABLED=true
# âœ… All provider configurations are set with real endpoints
# âœ… Circuit breaker thresholds are appropriate for production load
# âœ… Health check intervals are configured for production requirements